<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Reading Test - Offline</title>
    <title>Reading Mock Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ielts-red': '#DC2626',
                        'brand-primary': '#1E3A8A',
                        'brand-secondary': '#0F766E',
                        'ielts-gray': '#F3F4F6',
                        'ielts-border': '#E5E7EB'
                    }
                }
            }
        }
    </script>
    <style>
        .highlight {
            background-color: rgb(254 240 138);__
            background-color: rgb(254 240 138);
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Enhanced bullet points for flow chart */
        .flow-chart-list {
            list-style: none;
            padding-left: 0;
        }
        .flow-chart-list li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 8px;
            line-height: 1.5;
        }
        .flow-chart-list li:before {
            content: '‚óè';
            color: #DC2626;
            color: #1E3A8A;
            font-size: 16px;
            position: absolute;
            left: 0;
            top: 0;
            line-height: 1.5;
        }

        /* Welcome Modal FX (copied from Listening Mock 1) */
        @keyframes glitchFadeOut {
            0% {
                opacity: 1;
                transform: scale(1);
                filter: none;
            }
            10% {
                opacity: 0.9;
                transform: scale(1) translateX(-5px) skewX(-2deg);
                filter: hue-rotate(90deg);
            }
            20% {
                opacity: 0.85;
                transform: scale(1.02) translateX(5px) skewX(2deg);
                filter: hue-rotate(-90deg) saturate(2);
            }
            30% {
@@ -335,331 +336,311 @@
        .impact-flash {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, rgba(200,230,255,1) 0%, rgba(100,180,255,0.7) 30%, rgba(60,140,255,0.3) 60%, transparent 80%);
            border-radius: 50%;
            z-index: 4;
        }

        @keyframes welcomeFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        #premium-info-content::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="bg-white font-sans">
<body class="bg-slate-50 font-sans text-slate-800">
    <!-- Cursor Lightning Container -->
    <div id="cursor-lightning-container"></div>

    <!-- Welcome Modal (from Listening Mock 1) -->
    <div id="welcome-modal-bg" style="position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(20,20,40,0.95) 100%); z-index: 3000; backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);">
        <div id="welcome-modal" style="background: linear-gradient(145deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%); border-radius: 18px; box-shadow: 0 25px 50px rgba(0,0,0,0.5), 0 0 35px rgba(212,175,55,0.15), inset 0 1px 0 rgba(255,255,255,0.1); padding: 32px 32px; max-width: 460px; max-height: 92vh; margin: 15px; text-align: center; position: relative; animation: welcomeFadeIn 0.6s ease-out; border: 1px solid rgba(212,175,55,0.3); overflow-y: auto;">
            <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 60%; height: 2px; background: linear-gradient(90deg, transparent, #d4af37, #f4d03f, #d4af37, transparent); border-radius: 0 0 3px 3px;"></div>
        <div id="welcome-modal" style="background: linear-gradient(145deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%); border-radius: 18px; box-shadow: 0 25px 50px rgba(0,0,0,0.5), 0 0 35px rgba(15,118,110,0.18), inset 0 1px 0 rgba(255,255,255,0.1); padding: 32px 32px; max-width: 460px; max-height: 92vh; margin: 15px; text-align: center; position: relative; animation: welcomeFadeIn 0.6s ease-out; border: 1px solid rgba(15,118,110,0.35); overflow-y: auto;">
            <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 60%; height: 2px; background: linear-gradient(90deg, transparent, #0F766E, #14B8A6, #0F766E, transparent); border-radius: 0 0 3px 3px;"></div>
            <div class="logo-container" style="margin-bottom: 20px; position: relative; display: inline-block;">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 135px; height: 135px; background: radial-gradient(circle, rgba(30,144,255,0.15) 0%, rgba(0,71,171,0.1) 40%, transparent 70%); border-radius: 50%; animation: pulseGlow 3s ease-in-out infinite;"></div>
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 112px; height: 112px; background: radial-gradient(circle, rgba(0,51,102,0.2) 0%, rgba(25,25,112,0.15) 50%, transparent 70%); border-radius: 50%; animation: pulseGlow 3s ease-in-out infinite 0.5s;"></div>
                <div class="plasma-ring" style="width: 100px; height: 100px;"></div>

                <svg class="lightning-arc" style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 36px; height: 20px; animation: lightningArc1 3s linear infinite;" viewBox="0 0 40 22">
                    <path d="M2,20 L8,12 L6,12 L14,6 L11,6 L20,2 L29,6 L26,6 L34,12 L32,12 L38,20" stroke="#4aa8ff" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 3px rgba(74,168,255,0.6));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 40px; height: 18px; animation: lightningArc2 3s linear infinite;" viewBox="0 0 45 20">
                    <path d="M3,2 L10,8 L7,8 L18,14 L14,14 L23,18 L32,14 L28,14 L38,8 L35,8 L42,2" stroke="#5cb4ff" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 3px rgba(92,180,255,0.6));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; left: -8px; top: 50%; transform: translateY(-50%); width: 18px; height: 36px; animation: lightningArc3 3s linear infinite;" viewBox="0 0 20 40">
                    <path d="M18,3 L12,10 L12,7 L6,18 L6,14 L2,20 L6,26 L6,22 L12,33 L12,30 L18,37" stroke="#4aa8ff" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 3px rgba(74,168,255,0.6));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; right: -8px; top: 50%; transform: translateY(-50%); width: 18px; height: 36px; animation: lightningArc4 3s linear infinite;" viewBox="0 0 20 40">
                    <path d="M2,3 L8,10 L8,7 L14,18 L14,14 L18,20 L14,26 L14,22 L8,33 L8,30 L2,37" stroke="#5cb4ff" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 3px rgba(92,180,255,0.6));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; top: 2px; left: 2px; width: 22px; height: 22px; animation: lightningArc1 3s linear infinite 0.3s;" viewBox="0 0 25 25">
                    <path d="M22,22 L16,17 L18,16 L12,12 L14,11 L5,5" stroke="#3d9eff" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 2px rgba(61,158,255,0.5));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; top: 2px; right: 2px; width: 22px; height: 22px; animation: lightningArc3 3s linear infinite 0.2s;" viewBox="0 0 25 25">
                    <path d="M3,22 L9,17 L7,16 L13,12 L11,11 L20,5" stroke="#3d9eff" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 2px rgba(61,158,255,0.5));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; bottom: 2px; left: 2px; width: 22px; height: 22px; animation: lightningArc4 3s linear infinite 0.4s;" viewBox="0 0 25 25">
                    <path d="M22,3 L16,8 L18,9 L12,13 L14,14 L5,20" stroke="#3d9eff" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 2px rgba(61,158,255,0.5));"/>
                </svg>
                <svg class="lightning-arc" style="position: absolute; bottom: 2px; right: 2px; width: 22px; height: 22px; animation: lightningArc2 3s linear infinite 0.5s;" viewBox="0 0 25 25">
                    <path d="M3,3 L9,8 L7,9 L13,13 L11,14 L20,20" stroke="#3d9eff" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 2px rgba(61,158,255,0.5));"/>
                </svg>

                <a href="https://t.me/IELTS_AGE" target="_blank" rel="noopener noreferrer" class="logo-link">
                    <img src="https://pub-a3ed3eec4ae344b4917067de0a9376f1.r2.dev/20231027_164620_0000-photoaidcom-cropped.png" alt="CDI Logo" class="electric-logo" style="width: 85px; height: 85px; object-fit: contain; border-radius: 10px;">
                </a>
                <a href="https://imgbb.com/" target="_blank" rel="noopener noreferrer" class="logo-link"><img src="https://i.ibb.co/tPTnvSFz/Screenshot-2025-12-28-at-23-34-30.png" alt="Screenshot 2025 12 28 at 23 34 30" border="0" class="electric-logo" style="width: 85px; height: 85px; object-fit: cover; border-radius: 10px;"></a>

                <svg class="curve-strike" style="top: -25px; left: -35px; width: 85px; height: 70px; animation: curveStrike1 6s linear infinite;" viewBox="0 0 100 80">
                    <path d="M5,5 L15,12 L12,14 L28,22 L24,25 L42,35 L38,38 L58,48 L54,50 L75,60 L70,62 L95,75" stroke="#4aa8ff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 4px rgba(74,168,255,0.8));"/>
                    <path d="M6,6 L16,13 L13,15 L29,23 L25,26 L43,36 L39,39 L59,49 L55,51 L76,61 L71,63 L96,76" stroke="rgba(180,230,255,0.5)" stroke-width="1" fill="none"/>
                </svg>
                <div class="impact-flash" style="top: 26px; right: 5px; animation: impactFlash1 6s linear infinite;"></div>

                <svg class="curve-strike" style="bottom: -20px; right: -30px; width: 78px; height: 75px; animation: curveStrike2 6s linear infinite;" viewBox="0 0 90 85">
                    <path d="M85,80 L78,68 L82,66 L68,52 L72,50 L55,38 L60,35 L42,25 L48,22 L28,12 L34,10 L10,2" stroke="#5cb4ff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 4px rgba(92,180,255,0.8));"/>
                    <path d="M84,79 L77,67 L81,65 L67,51 L71,49 L54,37 L59,34 L41,24 L47,21 L27,11 L33,9 L9,1" stroke="rgba(180,230,255,0.5)" stroke-width="1" fill="none"/>
                </svg>
                <div class="impact-flash" style="top: -2px; left: 30px; animation: impactFlash2 6s linear infinite;"></div>

                <svg class="curve-strike" style="top: 18px; left: -38px; width: 82px; height: 78px; animation: curveStrike3 6s linear infinite;" viewBox="0 0 95 90">
                    <path d="M2,15 L18,20 L15,24 L35,32 L30,36 L52,45 L48,50 L68,60 L62,65 L80,78 L75,82 L92,88" stroke="#4aa8ff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="bevel" style="filter: drop-shadow(0 0 4px rgba(74,168,255,0.8));"/>
                    <path d="M3,16 L19,21 L16,25 L36,33 L31,37 L53,46 L49,51 L69,61 L63,66 L81,79 L76,83 L93,89" stroke="rgba(180,230,255,0.5)" stroke-width="1" fill="none"/>
                </svg>
                <div class="impact-flash" style="bottom: 6px; right: 12px; animation: impactFlash3 6s linear infinite;"></div>
            </div>

            <h1 style="font-size: 20px; font-weight: 700; color: #ffffff; margin-bottom: 6px; letter-spacing: 0.5px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">Welcome to the CDI Listening Platform</h1>
            <p style="font-size: 13px; color: #d4af37; font-weight: 500; margin-bottom: 20px; font-style: italic;">You're not here by accident.</p>
            <h1 style="font-size: 20px; font-weight: 700; color: #ffffff; margin-bottom: 6px; letter-spacing: 0.5px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">Welcome to Reading Mock Pro</h1>
            <p style="font-size: 13px; color: #0F766E; font-weight: 500; margin-bottom: 20px; font-style: italic;">Train with focus.</p>

            <div style="text-align: left; color: #e0e0e0; font-size: 12px; line-height: 1.65; margin-bottom: 20px;">
                <p style="margin-bottom: 12px;">This platform is designed for <strong style="color: #f4d03f;">serious IELTS candidates</strong> who want to practise with authentic, exam-level materials in a controlled, exam-like environment.</p>
                <p style="margin-bottom: 12px;">The CDI system, structure, and interface you're using are <strong style="color: #f4d03f;">custom-built</strong> to help you focus, track progress, and test your real listening level ‚Äî not inflated practice results.</p>
                <p style="margin-bottom: 12px;">You're paying for <strong style="color: #f4d03f;">quality, precision, and access</strong>, not shortcuts.</p>
                <p style="margin-bottom: 0;">If you're committed to real improvement, <strong style="color: #f4d03f;">you're in the right place.</strong></p>
                <p style="margin-bottom: 12px;">Built for <strong style="color: #14B8A6;">serious IELTS practice</strong> with realistic exam timing and pressure.</p>
                <p style="margin-bottom: 12px;">Use this <strong style="color: #14B8A6;">clean test layout</strong> to stay focused and measure real reading performance.</p>
                <p style="margin-bottom: 12px;">No shortcuts ‚Äî just <strong style="color: #14B8A6;">quality practice</strong> that improves score control.</p>
                <p style="margin-bottom: 0;">Stay consistent and you'll see <strong style="color: #14B8A6;">real progress.</strong></p>
            </div>

            <div style="display: flex; align-items: flex-start; gap: 10px; background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 8px; padding: 11px 13px; margin-bottom: 18px;">
                <span style="font-size: 16px; color: #ffc107; flex-shrink: 0;">‚ö†Ô∏è</span>
                <p style="font-size: 11px; color: #ccc; margin: 0; line-height: 1.5;">This platform is intentionally designed to work only on <strong style="color: #ffc107;">PCs and laptops</strong> for the best exam-like experience.</p>
                <span style="font-size: 16px; color: #14B8A6; flex-shrink: 0;">‚ö†Ô∏è</span>
                <p style="font-size: 11px; color: #ccc; margin: 0; line-height: 1.5;">This platform is intentionally designed to work only on <strong style="color: #14B8A6;">PCs and laptops</strong> for the best exam-like experience.</p>
            </div>

            <div style="width: 80%; height: 1px; background: linear-gradient(90deg, transparent, rgba(212,175,55,0.4), transparent); margin: 0 auto 18px;"></div>
            <div style="width: 80%; height: 1px; background: linear-gradient(90deg, transparent, rgba(15,118,110,0.4), transparent); margin: 0 auto 18px;"></div>

            <button id="welcome-start-btn" style="background: linear-gradient(135deg, #d4af37 0%, #f4d03f 50%, #d4af37 100%); color: #1a1a2e; font-weight: 700; font-size: 13px; padding: 13px 26px; border: none; border-radius: 28px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(212,175,55,0.4), inset 0 1px 0 rgba(255,255,255,0.3); letter-spacing: 0.3px; display: inline-flex; align-items: center; gap: 7px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(212,175,55,0.5), inset 0 1px 0 rgba(255,255,255,0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(212,175,55,0.4), inset 0 1px 0 rgba(255,255,255,0.3)';">
                <span style="font-size: 15px;">‚ñ∂</span> Start only when you're ready to take it seriously.
            <button id="welcome-start-btn" style="background: linear-gradient(135deg, #0F766E 0%, #14B8A6 50%, #0F766E 100%); color: #1a1a2e; font-weight: 700; font-size: 13px; padding: 13px 26px; border: none; border-radius: 28px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(15,118,110,0.4), inset 0 1px 0 rgba(255,255,255,0.3); letter-spacing: 0.3px; display: inline-flex; align-items: center; gap: 7px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(15,118,110,0.5), inset 0 1px 0 rgba(255,255,255,0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(15,118,110,0.4), inset 0 1px 0 rgba(255,255,255,0.3)';">
                <span style="font-size: 15px;">‚ñ∂</span> Start Mock
            </button>

            <p style="font-size: 9px; color: #666; margin-top: 15px;">¬© CDI Platform by @IELTS_AGE</p>
        </div>
    </div>

    <!-- Test Header -->
    <header class="bg-white border-b border-gray-200 px-6 py-1 sticky top-0 z-50 shadow-sm">
    <header class="bg-gradient-to-r from-blue-50 to-teal-50 border-b border-blue-100 px-6 py-2 sticky top-0 z-50 shadow-sm backdrop-blur">
        <div class="w-full flex items-center justify-between">
            <!-- Left section - Logo and Test taker ID -->
            <!-- Left section - Logo and Candidate ID -->
            <div class="flex items-center space-x-8 flex-1 justify-start min-w-0">
                <h1 class="text-red-600 font-bold text-2xl tracking-wide whitespace-nowrap" data-testid="ielts-logo">IELTS</h1>
                <span class="text-gray-500 text-sm font-medium whitespace-nowrap" data-testid="test-taker-id">Test taker ID</span>
                <h1 class="text-blue-900 font-bold text-2xl tracking-wide whitespace-nowrap" data-testid="ielts-logo">READING PRO</h1>
                <span class="text-gray-500 text-sm font-medium whitespace-nowrap" data-testid="test-taker-id">Candidate ID</span>
            </div>

            <!-- Center section - Telegram link -->
            <div class="flex-1 flex justify-center px-4">
                <a href="https://t.me/IELTS_AGE" target="_blank" class="inline-flex items-center gap-2 text-sm font-semibold text-blue-700 bg-blue-50 border border-blue-200 px-3 py-1 rounded-full shadow-sm hover:bg-blue-100 hover:text-blue-900 transition-colors">
                <a href="https://t.me/IELTS_AGE" target="_blank" class="inline-flex items-center gap-2 text-sm font-semibold text-teal-800 bg-teal-50 border border-teal-200 px-3 py-1 rounded-full shadow-sm hover:bg-teal-100 hover:text-teal-900 transition-colors">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                    </svg>
                    @IELTS_AGE
                </a>
            </div>

            <!-- Right section - Timer and navigation icons -->
            <div class="flex items-center space-x-3 flex-1 justify-end min-w-0">
                <!-- Timer -->
                <div class="flex items-center space-x-2 bg-gray-50 px-3 py-1 rounded-lg whitespace-nowrap" data-testid="timer-display">
                <div class="flex items-center space-x-2 bg-white border border-blue-100 px-3 py-1 rounded-lg whitespace-nowrap" data-testid="timer-display">
                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    <div id="timer-section" class="flex items-center space-x-1">
                        <button id="timer-text" class="text-sm font-mono font-semibold text-gray-700 hover:text-gray-900 cursor-pointer transition-colors duration-200" data-testid="timer-text" title="Click to edit time">
                        <span id="timer-text" class="text-sm font-mono font-semibold text-gray-700" data-testid="timer-text">
                            60:00
                        </button>
                        <button id="timer-toggle" class="p-0.5 hover:bg-gray-200 rounded transition-colors duration-200">
                            <svg id="play-icon" class="w-3 h-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <polygon points="5,3 19,12 5,21"></polygon>
                            </svg>
                            <svg id="pause-icon" class="w-3 h-3 text-gray-500 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <rect x="6" y="4" width="4" height="16"></rect>
                                <rect x="14" y="4" width="4" height="16"></rect>
                            </svg>
                        </button>
                        </span>
                    </div>
                </div>

                <!-- Premium VIP Button -->
                <button id="premium-btn" class="text-xs font-semibold text-white px-3 py-1 rounded-full shadow" style="background: linear-gradient(135deg, #f59e0b, #ec4899, #ef4444); border: none; display: flex; align-items: center; gap: 6px;">
                    <svg style="width: 12px; height: 12px; fill: currentColor;" viewBox="0 0 20 20">
                        <path d="M10 2l2.39 4.84L18 7.27l-3.91 3.81L14.78 18 10 15.27 5.22 18l.69-6.92L2 7.27l5.61-.43L10 2z"/>
                    </svg>
                    VIP Pack
                </button>

                <!-- Navigation icons -->
                <div class="flex items-center space-x-1">
                    <button class="p-1.5 hover:bg-gray-100 rounded-lg transition-colors duration-200" title="Connection status">
                        <svg class="w-5 h-5 text-gray-500 hover:text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
                            <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
                            <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
                            <line x1="12" y1="20" x2="12.01" y2="20"></line>
                        </svg>
                    </button>
                    <button class="p-1.5 hover:bg-gray-100 rounded-lg transition-colors duration-200" title="Notifications">
                        <svg class="w-5 h-5 text-gray-500 hover:text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </button>
                    <button class="p-1.5 hover:bg-gray-100 rounded-lg transition-colors duration-200" title="Menu">
                        <svg class="w-5 h-5 text-gray-500 hover:text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div id="main-container" class="flex-1 flex relative" style="height: calc(100vh - 100px);">
        <!-- Left Panel - Passage -->
        <div id="left-panel" class="overflow-auto" style="width: 50%;">
            <div class="flex-1 p-6 overflow-auto">
                <div id="part-header" class="bg-gray-100 p-4 rounded mb-6">
                <div id="part-header" class="bg-gradient-to-r from-blue-50 to-teal-50 border border-blue-100 p-4 rounded-xl mb-6 shadow-sm">
                    <h2 id="part-title" class="font-bold mb-2">Part 1</h2>
                    <p id="part-instructions" class="text-sm text-gray-700">You should spend about 20 minutes on Questions 1-13 which are based on Reading Passage 1.</p>
                    <p id="part-instructions" class="text-sm text-gray-700">Spend about 20 minutes on Q1‚Äì13 (Passage 1).</p>
                </div>

                <div class="prose max-w-none">
                    <div class="flex items-center justify-between mb-4">
                        <h3 id="passage-title" class="text-lg font-bold">The History of the Guitar</h3>
                        <div class="flex items-center space-x-2 text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full">
                        <div class="flex items-center space-x-2 text-sm text-teal-800 bg-teal-50 border border-teal-100 px-3 py-1 rounded-full">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9,12l2,2 4,-4"></path>
                            </svg>
                            <span>Select text to highlight and tap on it to clear</span>
                            <span>Highlight text ‚Ä¢ tap to clear</span>
                        </div>
                    </div>
                    <div id="passage-content" class="text-justify leading-relaxed space-y-4">
                        <!-- Content will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Resize Handle -->
        <div id="resize-handle" class="w-2 bg-gray-200 hover:bg-gray-300 cursor-col-resize transition-colors flex-shrink-0">
            <div class="w-full h-full flex items-center justify-center">
                <div class="w-1 h-8 bg-gray-400 rounded-full"></div>
            </div>
        </div>

        <!-- Right Panel - Questions -->
        <div id="right-panel" class="overflow-auto flex-1" style="width: 50%;">
            <div id="questions-container" class="flex-1 p-6 bg-white overflow-auto">
                <!-- Questions will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Test Footer -->

  <footer class="bg-white border-t border-gray-200 sticky bottom-0" data-testid="test-footer">
    <div class="flex justify-between items-center px-4 py-0.5">
        <!-- Navigation arrows -->
        <div class="flex items-center space-x-4 mr-6">
            <button id="prev-part-btn" class="w-8 h-8 bg-red-600 hover:bg-red-700 rounded-full text-white disabled:opacity-50 flex items-center justify-center" disabled>
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <footer class="bg-gradient-to-r from-blue-50 to-teal-50 border-t border-blue-100 sticky bottom-0" data-testid="test-footer">
    <div class="flex justify-between items-center px-4 py-1 gap-3">
        <!-- Part indicators -->
        <div id="parts-container" class="flex-1 flex flex-wrap justify-start items-center gap-2 relative">
            <!-- Part indicators will be loaded dynamically -->
        </div>

        <!-- Right controls -->
        <div class="flex items-center gap-2">
            <span class="text-xs font-semibold text-gray-600 mr-1">Questions</span>
            <button id="prev-part-btn" class="w-9 h-9 bg-blue-900 hover:bg-blue-800 rounded-full text-white disabled:opacity-50 flex items-center justify-center" disabled title="Previous questions">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <polyline points="15,18 9,12 15,6"></polyline>
                </svg>
            </button>
            <button id="next-part-btn" class="w-8 h-8 bg-red-600 hover:bg-red-700 rounded-full text-white flex items-center justify-center">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <button id="next-part-btn" class="w-9 h-9 bg-blue-900 hover:bg-blue-800 rounded-full text-white flex items-center justify-center" title="Next questions">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <polyline points="9,18 15,12 9,6"></polyline>
                </svg>
            </button>
            <button id="submit-test-btn" class="bg-blue-900 text-white px-3 py-2 font-medium hover:bg-blue-800 text-sm rounded ml-2">
                Submit
            </button>
        </div>

        <!-- Part indicators -->
        <div id="parts-container" class="flex-1 flex flex-wrap justify-between items-center gap-2 relative">
            <!-- Part indicators will be loaded dynamically -->
        </div>

        <!-- Submit button -->
        <button id="submit-test-btn" class="bg-red-600 text-white px-3 py-1 font-medium hover:bg-red-700 h-8 text-sm rounded ml-4">
            Submit Test
        </button>
    </div>

</footer>

    <!-- Highlight Buttons -->
    <div id="highlight-button" class="fixed x-50 bg-white hover:bg-gray-50 text-gray-800 border border-gray-200 px-3 py-1 rounded shadow-lg cursor-pointer text-sm font-medium transition colors hidden">
        Highlight
    </div>

    <div id="clear-highlight-button" class="fixed z-50 bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 px-3 py-1 rounded shadow-lg cursor-pointer text-sm font-medium transition-colors hidden">
        Clear Highlight
        Clear
    </div>

    <!-- Submit Confirmation Modal -->
    <div id="submit-confirmation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h2 class="text-xl font-bold mb-4 text-center">Submit Test</h2>
            <h2 class="text-xl font-bold mb-4 text-center">Submit</h2>
            <div class="mb-6">
                <p class="text-gray-700 text-center">
                    Are you sure you want to submit your test?
                    Submit your answers now?
                </p>
                <p class="text-sm text-gray-500 text-center mt-2">
                    Once submitted, you will see the answers and cannot continue the test.
                    After submission, review mode starts and the timer ends.
                </p>
            </div>
            <div class="flex gap-3 justify-center">
                <button id="cancel-submit" class="px-6 py-2 border border-gray-300 rounded hover:bg-gray-50 font-medium">
                    Cancel
                </button>
                <button id="confirm-submit" class="px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-medium">
                    Submit Test
                <button id="confirm-submit" class="px-6 py-2 bg-blue-900 text-white rounded hover:bg-blue-800 font-medium">
                    Submit
                </button>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div id="results-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[80vh] flex flex-col">
            <h2 class="text-2xl font-bold mb-4">Test Results</h2>
            <div class="flex-1 overflow-y-auto min-h-0">
                <div id="results-content">
                    <!-- Results will be displayed here -->
                </div>
            </div>
            <button id="close-results" class="mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex-shrink-0">
            <button id="close-results" class="mt-4 bg-blue-900 text-white px-4 py-2 rounded hover:bg-blue-800 flex-shrink-0">
                Close
            </button>
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="premium-modal-bg" style="position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); z-index: 2000;">
        <div id="premium-modal" style="background: white; border-radius: 16px; box-shadow: 0 25px 50px rgba(0,0,0,0.3); padding: 18px; max-width: 400px; max-height: 98vh; margin: 5px; text-align: left; position: relative; animation: fadeInScale 0.3s ease-out; overflow: hidden;">
            <button id="close-premium-modal" style="position: absolute; top: 4px; right: 8px; color: #9ca3af; font-size: 22px; font-weight: bold; background: none; border: none; cursor: pointer; display: none; z-index: 10;" onmouseover="this.style.color='#ef4444'" onmouseout="this.style.color='#9ca3af'">&times;</button>
            <div id="premium-video-container" style="width: 100%; display: none; flex-direction: column; align-items: center; justify-content: center;">
                <video id="premium-intro-video" style="border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 4px; width: 100%; max-width: 300px; background: black;" src="https://pub-a3ed3eec4ae344b4917067de0a9376f1.r2.dev/IELTS_Pack_Intro_Video_Generated.mp4" controls></video>
            </div>
            <div id="premium-info-content" style="font-size: 12px; color: #374151; opacity: 0; transition: opacity 0.7s; pointer-events: none; max-height: calc(98vh - 50px); overflow-y: scroll; overflow-x: hidden; scrollbar-width: none; -ms-overflow-style: none; padding-bottom: 10px;">
                <h2 style="font-size: 16px; font-weight: bold; color: #f59e0b; margin-bottom: 6px; display: flex; align-items: center;">
                    <svg style="width: 16px; height: 16px; margin-right: 4px; fill: #fbbf24;" viewBox="0 0 20 20"><path d="M10 2l2.39 4.84L18 7.27l-3.91 3.81L14.78 18 10 15.27 5.22 18l.69-6.92L2 7.27l5.61-.43L10 2z"/></svg>
                    IELTS VIP Pack
                </h2>
                <span style="font-weight: 600; font-size: 11px;">üì¶ What's included:</span>
                <ul style="list-style: disc; padding-left: 16px; margin: 2px 0 6px 0; line-height: 1.4;">
                    <li>‚úîÔ∏è CDI Reading & Listening (13-Full Mock)</li>
                    <li>‚úîÔ∏è Clear Accurate Answer Explanations</li>
                    <li>‚úîÔ∏è Exam Materials</li>
                    <li>‚úîÔ∏è Clean, distraction-free interface</li>
                    <li>‚úîÔ∏è 10 Bonus Tests (from my own exam)</li>
                    <li>‚úîÔ∏è High-quality PDF versions for printing</li>
@@ -682,209 +663,189 @@
                <div style="margin-top: 6px;">
                    <span style="font-weight: 600; font-size: 11px;">üõ´ Price:</span><br>
                    <span style="font-size: 14px; font-weight: bold; color: #16a34a;">149,000 so'm</span><br>
                    <span style="font-size: 14px; font-weight: bold; color: #dc2626;">üí≤Only 99,000 so'm (‚Äì34%)</span><br>
                    <span style="color: #ca8a04; font-size: 11px;">Eligible for: ‚ú®-50% ‚Äî&gt; for my next CDI Pack</span>
                </div>
                <div style="margin-top: 6px;">
                    <span style="font-weight: 600; font-size: 11px;">üîê One-time access üîë</span><br>
                    <span style="color: #6b7280; font-size: 10px;">‚ÑπÔ∏è This pack will not be publicly shared or reposted.</span>
                </div>
                <a href="https://t.me/Shohrukh_05?text=Hi%2C%20I%20wanted%20to%20purchase%20access%20to%20the%20VIP%20channel" target="_blank" style="display: block; width: 90%; margin-left: auto; margin-right: auto; text-align: center; background: linear-gradient(to right, #fbbf24, #ec4899, #ef4444); color: white; font-weight: bold; padding: 10px 16px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-top: 12px; margin-bottom: 8px; font-size: 14px; text-decoration: none; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">üì© Tap VIP ACCESS</a>
            </div>
        </div>
    </div>

    <script>
        // Test Data
        const testData = {
            "id": "ielts-reading-test-1",
            "title": "IELTS Reading Test",
            "duration": 60,
            "parts": [
                {
                    "id": 1,
                    "title": "Part 1",
                    "instructions": "You should spend about 20 minutes on Questions 1-13 which are based on Reading Passage 1.",
                    "instructions": "Spend about 20 minutes on Q1‚Äì13 (Passage 1).",
                    "questionRange": "1‚Äì13",
                    "passage": {
                        "title": "The History of the Guitar",
                        "content": "<em>An overview of the origins of the modern guitar</em>\n\n<strong>A</strong> The earliest stringed instruments currently known to archaeologists are bowl harps. For millennia, people made bowl harps using, for example, tortoise shells as resonators, with a bent stick for a neck and one or more gut or silk strings. The world's museums contain many such harps from the ancient Sumerian, Babylonian, and Egyptian civilisations. Around 2500-2000 BC more advanced harps, such as the beautifully carved 11-stringed instrument found in the tomb of Queen Shub-Ad in ancient Mesopotamia, now modern-day Iraq, started to appear.\n\n<strong>B</strong> The tanbur probably developed from the bowl harp. It was different from the bowl harp in that its neck was straightened out to allow the strings to be pressed down to create more notes. Tomb paintings and stone carvings in Egypt indicate that harps and tanburs - plus flutes and percussion instruments - were being played together 3,500-4,000 years ago. Archaeologists have also found many similar relics amongst the ruins of the ancient Mesopotamian civilisation. Many of these instruments have survived into modern times in almost unchanged form, for example folk instruments of the region such as the Turkish saz and Afghan panchtar.\n\n<strong>C</strong> At 3,500 years old, the tanbur which belonged to the Egyptian singer Har-Mose is the earliest known example of this instrument. Har-Mose's tanbur had three strings and a plectrum suspended from the neck by a cord. The soundbox, which increased the volume, was made of beautifully polished cedarwood and covered in rawhide. It can be seen today at the Archaeological Museum in Cairo.\n\n<strong>D</strong> In order to distinguish guitars from other stringed instruments, it is helpful to have a broad definition of the guitar. Music expert Dr Michael Kasha defines a guitar as having 'a long, fretted neck, flat wooden soundboard, ribs, and a flat back, most often with sides that curve inwards'. The oldest known visual representation of such an instrument is a stone carving at Alacaa H√ºy√ºk in Turkey, which shows a 3,300-year-old instrument with a long neck and sides that clearly curve inwards.\n\n<strong>E</strong> The name 'guitar' comes from the ancient Sanskrit word for 'string' - 'tar'. Many popular stringed instruments used in central Asia today have existed in an unchanged form for several thousand years, as shown by the archaeological finds in the area. Many have names that end in 'tar', with a prefix indicating the number of strings, such as the dotar, a two-stringed instrument found in Turkestan, and the Persian three-stringed setar and four-stringed chartar. The Indian sitar almost certainly took its name from the setar, but over the centuries it evolved radically, following the Indians' own aesthetic and cultural ideals.\n\n<strong>F</strong> Tanburs and harps spread around the ancient world with travellers, merchants and seamen. The earliest guitar-like instruments to arrive in Europe had, most often, four strings. Many such instruments, and variations with from three to five strings, can be seen in mediaeval illustrated manuscripts. They were also carved in stone in European churches and cathedrals, from the first century AD through until the 13th century.\n\n<strong>G</strong> When the four stringed Persian chartar arrived in Spain, however, it changed in form and construction, acquiring pairs of strings tuned to the same note instead of single strings. It became known as the chitarra. By the middle of the 14th century, the chitarra had become dominant, at least in most of Europe. The earliest known music for the eight-stringed chitarra was written in 16th-century Spain. The ten-string version first appeared in Italy at the same time, and gradually replaced the eight-stringed instrument. A further two strings first appeared in the 17th century, an innovation which guitar makers all over Europe quickly took up. However, this twelve-string arrangement gradually gave way to six single strings across the continent. The six-stringed guitar can thus be said to be a development of the twelve-stringed, rather than vice versa, as was thought previously.\n\n<strong>H</strong> At the beginning of the 19th century, the present-day guitar began to take shape, although bodies were still fairly small and narrow-waisted. The modern classical guitar first appeared in its current form in the mid-19th century, when the Spanish guitar maker Antonio Torres increased the size of the body, altered its proportions, and introduced the revolutionary fan-braced top**. His design radically increased the volume and improved the tone of the instrument and very soon became the norm. This design has remained essentially unchanged to this day.\n\n<strong>I</strong> At the time when Torres made his breakthrough, German immigrants to America - among them Christian Friedrich Martin - began making guitars with X-braced tops. Steel strings, which became widely available several decades later in the early 1900s, offered the promise of much louder guitars, but the increased tension was too much for the fan-braced top. The stronger X-braced top proved equal to the job, and quickly became the industry standard.\n\n<strong>J</strong> At the end of the 19th century, guitar manufacturer Orville Gibson added steel strings to a body constructed like a cello, a combination which produced more volume. The electric guitar was born when pickups were fitted to Hawaiian and jazz guitars in the late 1920s, but met with little success until 1936, when Gibson introduced its famous ES150 model.\n\n* tanbur: a long-necked stringed instrument with a small pear-shaped body\n\n** fan-braced top: a strengthening structure in the shape of a fan inserted into the soundbox"
                    },
                    "questions": [
                        { "id": 1, "type": "TRUE_FALSE_NOT_GIVEN", "text": "The instrument found in Queen Shub-Ad's tomb is the world's oldest known version of a harp.", "options": [{ "value": "true", "label": "TRUE" }, { "value": "false", "label": "FALSE" }, { "value": "not-given", "label": "NOT GIVEN" }], "correctAnswer": "false", "explanation": "FALSE - Paragraph A says bowl harps are the earliest known instruments, while Queen Shub-Ad's harp appeared later (2500‚Äì2000 BC) as a more advanced type." },
                        { "id": 2, "type": "TRUE_FALSE_NOT_GIVEN", "text": "Today's Afghan panchtar is very similar to an ancient Mesopotamian instrument.", "options": [{ "value": "true", "label": "TRUE" }, { "value": "false", "label": "FALSE" }, { "value": "not-given", "label": "NOT GIVEN" }], "correctAnswer": "true", "explanation": "TRUE - Paragraph B says many instruments survived into modern times in almost unchanged form, including the Afghan panchtar." },
                        { "id": 3, "type": "TRUE_FALSE_NOT_GIVEN", "text": "The Egyptian singer Har-Mose was an excellent tanbur player.", "options": [{ "value": "true", "label": "TRUE" }, { "value": "false", "label": "FALSE" }, { "value": "not-given", "label": "NOT GIVEN" }], "correctAnswer": "not-given", "explanation": "NOT GIVEN - Paragraph C describes Har-Mose and his tanbur but gives no information about his skill as a player." },
                        { "id": 4, "type": "TRUE_FALSE_NOT_GIVEN", "text": "Cairo Archaeological Museum contains many historic musical instruments.", "options": [{ "value": "true", "label": "TRUE" }, { "value": "false", "label": "FALSE" }, { "value": "not-given", "label": "NOT GIVEN" }], "correctAnswer": "not-given", "explanation": "NOT GIVEN - Paragraph C only states the tanbur is in the Archaeological Museum in Cairo, not that it contains many historic instruments." },
                        { "id": 5, "type": "TRUE_FALSE_NOT_GIVEN", "text": "The instrument carved in stone at Alacaa H√ºy√ºk is consistent with Dr Michael Kasha's definition of a guitar.", "options": [{ "value": "true", "label": "TRUE" }, { "value": "false", "label": "FALSE" }, { "value": "not-given", "label": "NOT GIVEN" }], "correctAnswer": "true", "explanation": "TRUE - Paragraph D links Kasha's definition to the Alacaa H√ºy√ºk carving, which shows a long neck and inward-curving sides." },
                        { "id": 6, "type": "TRUE_FALSE_NOT_GIVEN", "text": "The different instruments that appeared in mediaeval literature had the same number of strings.", "options": [{ "value": "true", "label": "TRUE" }, { "value": "false", "label": "FALSE" }, { "value": "not-given", "label": "NOT GIVEN" }], "correctAnswer": "false", "explanation": "FALSE - Paragraph F states the instruments varied from three to five strings." },
                        { "id": 7, "type": "GAP_FILL", "text": "was a development of an earlier instrument called the 7 .....................", "correctAnswer": "chartar", "explanation": "Paragraph G: the four-stringed Persian chartar arrived in Spain and became known as the chitarra." },
                        { "id": 8, "type": "GAP_FILL", "text": "its shape a result of modifications including a larger 8 ..................... introduced by Antonio Torres", "correctAnswer": "body", "explanation": "Paragraph H: Antonio Torres increased the size of the body." },
                        { "id": 9, "type": "GAP_FILL", "text": "changes produced better tone and greater 9 .....................", "correctAnswer": "volume", "explanation": "Paragraph H: his design increased the volume and improved the tone." },
                        { "id": 10, "type": "GAP_FILL", "text": "first made in 10 ..................... in mid-19th century", "correctAnswer": "America", "explanation": "Paragraph I: German immigrants to America began making guitars with X-braced tops." },
                        { "id": 11, "type": "GAP_FILL", "text": "strings made of 11 ..................... became available around 1900", "correctAnswer": "steel", "explanation": "Paragraph I: steel strings became widely available in the early 1900s." },
                        { "id": 12, "type": "GAP_FILL", "text": "in the 1920s, 12 ..................... added to guitars", "correctAnswer": "pickups", "explanation": "Paragraph J: pickups were fitted to Hawaiian and jazz guitars in the late 1920s." },
                        { "id": 13, "type": "GAP_FILL", "text": "a well-known version brought out by 13 .....................", "correctAnswer": "Gibson", "explanation": "Paragraph J: Gibson introduced its famous ES150 model." }
                    ]
                },
                {
                    "id": 2,
                    "title": "Part 2",
                    "instructions": "You should spend about 20 minutes on Questions 14-26, which are based on Reading Passage 2.",
                    "instructions": "Spend about 20 minutes on Q14‚Äì26 (Passage 2).",
                    "questionRange": "14-26",
                    "passage": {
                        "title": "Playing Soccer",
                        "content": "<strong>A</strong> Street soccer, as its name implies, is an informal variation of the sport, often played on the street, particularly in urban areas. There are many reasons for the widespread popularity of street soccer. Unlike youth soccer, its more formally organized counterpart, no large space is needed, and goal posts, corner markers, and marked lines, associated with the formal game, are typically absent, as are game officials or referees. Another attraction of street soccer is that it is played frequently and competitively, but does not necessarily require standard 11-a-side teams or fixed playing positions. Unlike in youth soccer, inexperienced street soccer players rarely learn from repetitive technical and tactical drills. Instead, they learn from their poor performance in competition, unconscious of the skills they are nonetheless developing, and without older adults or coaches present. Players learn without effort through playing the game, and soon attain an almost natural feeling for the sport.\n\n<strong>B</strong> However, there are lots of cities in the world today where conditions are such that street soccer is no longer possible. Congested traffic now dominates where games were once played. Parks and open fields are used as hangouts for teenagers with other interests. Add to this the requirement in many localities for official permits to use public spaces and the managed schedules that many young people have today, and spontaneous play of any kind is hard to imagine.\n\n<strong>C</strong> In spite of all these obstacles, which are probably solvable in most instances, there is another sociological explanation of why in many places street soccer doesn't enjoy the same popularity it once did. In his book <em>How Soccer Explains the World</em>, US writer Franklin Foer observes: 'But for all the talk of freedom, the 1960s parenting style had a far less relaxed side too. Like the 1960s consumer movement which brought seat belts and airbags to cars, the (youth) soccer movement felt like it could create a set of ... regulations that would protect both the child's body and mind from damage.' Soccer leagues like the one I played in as a child handed out 'participation' prizes to every player, no matter how few games his (or her) team won. Where most of the world accepts the practice of using your head to hit the ball as an essential element of the game, some (youth) soccer parents have worried over the potential for injury to the brain. An entire industry grew up to manufacture protective headgear. Even though very little medical evidence supports this fear, some youth leagues prohibited heading the ball altogether.\n\n<strong>D</strong> A growing body of people don't believe street soccer involves a legitimate educational method. They argue that children need to be taught by experts. Youth soccer instruction now begins with four-year-olds, so that they will have an advantage as six-year-olds. This need to get ahead brings with it a fear of falling behind that only expert instruction can prevent. This type of instruction leaves no room for the trial and error approach of street soccer.\n\n<strong>E</strong> One of the basic ideas of street soccer is that young players are assigned a particular role by a better player and are expected to play for the good of the team. Such an assignment runs counter to the idea of youth soccer that every child needs to learn every position and will benefit from doing so. In street soccer, you fill the role that you are best suited to at a particular time. While this role assignment can change from game to game, the purpose is always the same: to get the best out of each individual at any given moment.\n\n<strong>F</strong> In street soccer, children have to learn patience, to wait their turn, to realize that they are not entitled to make decisions, or even be listened to simply because they speak up. Positions of responsibility are earned through competition within the team. Younger players in street soccer must wait to attain those positions. In youth soccer, however, with its overly democratic values, youngsters are guaranteed their time in the spotlight. Whether it's their turn to be captain, to play a central position or to take a crucial shot, youth soccer players come to believe that hard work and patience aren't really necessary.\n\n<strong>G</strong> Not only does every youth soccer player get a chance, it is assumed that each individual has played well. 'Everyone's a winner; no one's a loser' is a guiding principle of youth soccer. This ensures each individual goes away positive about themselves. No one can leave a game or a practice feeling bad. But if there really are no losers, then why try at all? Since giving less than your best receives the same reward as giving your best, why go to any extra effort? In street soccer, every game results in a winner and a loser and everyone knows who is who. Losing a game is a common experience and players learn early on how to handle this. As a result, unlike most youth soccer players, they acquire resilience. A further difference between these two strands of soccer is that in street soccer a formal record is not kept. You can lose one day and win the next. The results are only temporary and are forgotten within minutes of the end of the match. But in organized youth soccer, the position each person plays and the results are formally noted and maintained throughout a season."
                    },
                    "questions": [
                        { "id": 14, "type": "PARAGRAPH_SELECTION", "text": "a contrast between the ways young players gain experience of playing different positions", "correctAnswer": "E", "explanation": "Paragraph E contrasts role assignment in street soccer with the youth-soccer idea that every child should learn every position." },
                        { "id": 15, "type": "PARAGRAPH_SELECTION", "text": "examples outside sport of greater emphasis on individual safety", "correctAnswer": "C", "explanation": "Paragraph C mentions seat belts and airbags as non-sport examples of increased safety emphasis." },
                        { "id": 16, "type": "PARAGRAPH_SELECTION", "text": "a description of methods of selection for leadership on soccer teams", "correctAnswer": "F", "explanation": "Paragraph F explains that positions of responsibility (e.g., captain) are earned through competition within the team." },
                        { "id": 17, "type": "PARAGRAPH_SELECTION", "text": "details of urban changes that discourage street soccer", "correctAnswer": "B", "explanation": "Paragraph B lists congested traffic, use of parks, permit requirements, and managed schedules as obstacles." },
                        { "id": 18, "type": "PARAGRAPH_SELECTION", "text": "a mention of the lesson that failure teaches street soccer players", "correctAnswer": "G", "explanation": "Paragraph G notes that losing is common and teaches players resilience." },
                        { "id": 19, "type": "PARAGRAPH_SELECTION", "text": "an explanation of why youth soccer emphasises the need for coaches", "correctAnswer": "D", "explanation": "Paragraph D says expert instruction is demanded due to fear of falling behind." },
                        { "id": 20, "type": "MULTIPLE_CHOICE_MULTI", "text": "The list below gives some possible reasons for the popularity of street soccer. Which TWO of these reasons are mentioned by the writer of the text?", "options": [
                            { "value": "A", "label": "A Many famous soccer players got their start in street soccer." },
                            { "value": "B", "label": "B Young people can begin playing street soccer at a very early age." },
                            { "value": "C", "label": "C You do not need elaborate facilities to play street soccer." },
                            { "value": "D", "label": "D Inexperienced street soccer players are not criticised for mistakes." },
                            { "value": "E", "label": "E Street soccer teams can have varying numbers of players." }
                        ], "correctAnswer": ["C", "E"], "explanation": "Paragraph A notes no large space or formal facilities are needed and teams need not be standard 11-a-side." },
                        { "id": 22, "type": "MULTIPLE_CHOICE_MULTI", "text": "The list below gives some possible results of the 1960s parenting style. Which TWO of these results are mentioned by Franklin Foer in the excerpt from How Soccer Explains the World?", "options": [
                            { "value": "A", "label": "A Participation in youth soccer became much more expensive." },
                            { "value": "B", "label": "B Some youth soccer leagues adopted more restrictive rules of play." },
                            { "value": "C", "label": "C Fewer young people joined youth soccer teams." },
                            { "value": "D", "label": "D Youth soccer players were sometimes rewarded for simply playing in games." },
                            { "value": "E", "label": "E Soccer equipment manufacturers directed advertising towards parents." }
                        ], "correctAnswer": ["B", "D"], "explanation": "Paragraph C mentions restrictive rules like banning heading and participation prizes for all players." },
                        { "id": 24, "type": "GAP_FILL", "text": "For youth soccer players, a key 24 ..................... is that they should always come away from the game with a positive attitude.", "correctAnswer": "principle", "explanation": "Paragraph G: 'Everyone's a winner; no one's a loser' is described as a guiding principle." },
                        { "id": 25, "type": "GAP_FILL", "text": "In this respect, regardless of the effort the players make, they get some kind of 25 ..................... at the end of a game.", "correctAnswer": "reward", "explanation": "Paragraph G: giving less than your best receives the same reward as giving your best." },
                        { "id": 26, "type": "GAP_FILL", "text": "In fact, no-one ever keeps a 26 ..................... of the results of games.", "correctAnswer": "record", "explanation": "Paragraph G: in street soccer a formal record is not kept." }
                    ]
                },
                {
                    "id": 3,
                    "title": "Part 3",
                    "instructions": "You should spend about 20 minutes on Questions 27-40, which are based on Reading Passage 3.",
                    "instructions": "Spend about 20 minutes on Q27‚Äì40 (Passage 3).",
                    "questionRange": "27-40",
                    "passage": {
                        "title": "Memory Champions ... or just good at tricks?",
                        "intro": "",
                        "content": "<strong>A</strong> The Examinations School at Oxford University is where, last August, 34 contestants gathered at the World Memory Championships. It is an impressive historical venue, known for its austere yet grandiose setting of oak-paneled rooms, large Gothic windows, and looming portraits of eminent dukes and earls. It is here that generations of Oxford students have been tested in their final exams on their memory and knowledge, and it is here that these contestants were challenged to demonstrate their exceptional mnemonic abilities. Reciting poems, memorizing digit sequences, and recalling faces from photographs are just a few of the tasks that test the limits of human memory in this competitive setting.\n\n<strong>B</strong> They are using a technique known as the loci method, reportedly originating in 477 BC with the Greek poet Simonides of Ceos. He was able to memorize the guest list at a dinner by closing his eyes and recalling each individual around the table. The loci method, which was rediscovered and popularized by Simonides, has become an integral part of historical and modern memory training. This method involves associating items to be remembered with specific physical locations, creating a mental map that facilitates recall. After Simonides's discovery, the loci method became widely embraced across ancient Greece, serving as a fundamental technique for orators and scholars. It was so effective that it was incorporated into educational curricula and became a cornerstone of rhetorical training. Aristotle wrote favorably about it, recognizing its value and effectiveness. Later, a number of treatises on the art of memory were published in Rome, further cementing its importance and utility in memory training. This method not only aids in memorization but also enhances the ability to retrieve information by navigating through these mental loci, effectively walking through a structured memory palace.\n\n<strong>C</strong> One memory champion, Ed Cooke, can memorize the order of ten decks of playing cards in less than one hour or one deck of cards in less than one minute. Psychologists Elizabeth Valentine and John Wilding have teamed up with Eleanor Maguire to study how memory champions like Cooke operate differently from average individuals. Their collaboration aims to explore the neural underpinnings that might explain the exceptional memory skills exhibited by competitors in high-pressure environments such as memory championships. When the researchers analyzed the brain scans from the number memorization, they found that the memory champions were activating some brain regions that were different from those the control subjects were using. These regions are known to be involved in visual memory and spatial navigation.\n\n<strong>D</strong> To enable himself to memorize quickly, Ed Cooke has memorized a specific human being, verb, and object that he associates with every card in the deck. This detailed and highly personalized system allows him to rapidly encode and decode information during competitions. When Cooke commits a deck to memory, he does it three cards in one go, with every three-card group forming a composite picture of a person doing something to an object. This method not only enhances the memorization process but also makes the recall process faster and more efficient. He then places those images along a specific familiar path in his mind, creating a vivid mental journey that he can easily traverse. When it comes to recall, Cooke takes a mental walk along his route and translates the images into cards, effectively and efficiently converting his vivid mental images back into the specific order of the deck. This innovative approach to memory exercises showcases the extraordinary capabilities of mental athletes and the sophisticated strategies they employ to achieve their remarkable feats.\n\n<strong>E</strong> The term 'photographic memory' is frequently used to describe people with exceptional recall. Yet, most researchers agree there is no proof that such a memory truly exists. If it is indeed a myth, it highlights how learned strategies are often more effective than natural talent. The belief in 'photographic memory' remains a point of contention among the public and scientists alike. Despite the absence of solid scientific evidence, this myth endures, reflecting how society's fascination with remarkable memory tends to ignore the practical techniques and training that genuinely drive mnemonic success.\n\n<strong>F</strong> The most renowned of the naturals was the Russian journalist S.V. Shereshevski, who could remember long sequences of numbers learned decades before, as well as poems, strings of meaningless syllables, and nearly anything else he was asked to recall. Shereshevski also experienced synesthesia, a rare sensory condition where the senses are interconnected, which significantly improved his memorization ability. His skills were not limited to these accomplishments; his remarkable memory covered an almost endless range of information, making him a figure of great interest and study. This synesthetic trait not only made his memorization tasks easier but also more vivid and long-lasting. His case has been extensively examined, as it offers deep insights into the potential of human memory when enhanced by neurological variations.\n\n<strong>G</strong> K. Anders Ericsson, a well-known psychologist, claims that anyone can develop memory abilities comparable to those of memory champions through consistent practice and proper techniques. During two years of experimentation, S.V. increased his ability to recall numbers from seven to over eighty. This study led Ericsson to conclude that there is no such thing as an innately superior memory. When he revisited original case reports of natural memorizers, he discovered that their remarkable abilities were actually based on the use of specific techniques ‚Äî sometimes unconsciously ‚Äî combined with extensive practice. Strategists are usually outstanding at remembering only certain kinds of material, whereas naturals exhibit strong memory across many types of tasks and can retain those memories more easily."
                    },
                    "questions": [
                        { "id": 27, "type": "PARAGRAPH_SELECTION", "text": "a description of how a contestant remembers complex sequences", "correctAnswer": "D", "explanation": "Paragraph D details Ed Cooke‚Äôs person-verb-object system for remembering card sequences." },
                        { "id": 28, "type": "PARAGRAPH_SELECTION", "text": "an example of how one person‚Äôs memory was improved over time", "correctAnswer": "G", "explanation": "Paragraph G notes S.V. increased recall from seven to over eighty through two years of training." },
                        { "id": 29, "type": "PARAGRAPH_SELECTION", "text": "a description of a memorizing competition", "correctAnswer": "A", "explanation": "Paragraph A describes the World Memory Championships and the contest setting." },
                        { "id": 30, "type": "PARAGRAPH_SELECTION", "text": "a commonly held belief about memory that many experts say is unproven", "correctAnswer": "E", "explanation": "Paragraph E says 'photographic memory' is commonly believed but lacks proof." },
                        { "id": 31, "type": "PARAGRAPH_SELECTION", "text": "a reference to the first recorded use of memorizing through location", "correctAnswer": "B", "explanation": "Paragraph B mentions Simonides of Ceos and the origins of the loci method in 477 BC." },
                        { "id": 32, "type": "PARAGRAPH_SELECTION", "text": "a reference to an unusual condition which results in improved memory", "correctAnswer": "F", "explanation": "Paragraph F describes synesthesia, a rare condition that enhanced Shereshevski‚Äôs memory." },
                        { "id": 33, "type": "GAP_FILL", "text": "A 33 ............, an action, and a thing are assigned to consecutive cards in the pack.", "correctAnswer": "specific human being", "explanation": "Paragraph D: Cooke assigns a specific human being, a verb, and an object to cards." },
                        { "id": 34, "type": "GAP_FILL", "text": "Combining these images allows Cooke to memorise 34 ............ at a time.", "correctAnswer": "three cards", "explanation": "Paragraph D: he memorizes three cards in one go by combining the images." },
                        { "id": 35, "type": "GAP_FILL", "text": "The mind pictures are then positioned on a 35 ............ .", "correctAnswer": "specific familiar path", "explanation": "Paragraph D: the images are placed along a specific familiar path." },
                        { "id": 36, "type": "GAP_FILL", "text": "The pack of cards is remembered by going for a 36 ............ while the pictures are converted back into cards.", "correctAnswer": "mental walk", "explanation": "Paragraph D: Cooke takes a mental walk along his route to recall the cards." },
                        { "id": 37, "type": "MATCHING", "text": "Valentine, Wilding and Maguire‚Äôs experiment shows that the memory contestants", "options": [{ "value": "A", "label": "A used mainly for educational purposes." }, { "value": "B", "label": "B activated brain areas associated with visual and spatial memory." }, { "value": "C", "label": "C became widespread in ancient Greece for memorizing speeches and texts." }, { "value": "D", "label": "D the result of techniques and extensive practice." }, { "value": "E", "label": "E retaining a wide variety of tasks." }, { "value": "F", "label": "F benefited from additional cognitive abilities." }], "correctAnswer": "B", "explanation": "Paragraph C reports activation of brain regions involved in visual memory and spatial navigation." },
                        { "id": 38, "type": "MATCHING", "text": "After Simonides discovered the loci method in 477 BC, it was", "options": [{ "value": "A", "label": "A used mainly for educational purposes." }, { "value": "B", "label": "B activated brain areas associated with visual and spatial memory." }, { "value": "C", "label": "C became widespread in ancient Greece for memorizing speeches and texts." }, { "value": "D", "label": "D the result of techniques and extensive practice." }, { "value": "E", "label": "E retaining a wide variety of tasks." }, { "value": "F", "label": "F benefited from additional cognitive abilities." }], "correctAnswer": "C", "explanation": "Paragraph B says the loci method became widely embraced across ancient Greece for orators and scholars." },
                        { "id": 39, "type": "MATCHING", "text": "Ericsson finds out that natural memorizers are better than strategic memorizers at", "options": [{ "value": "A", "label": "A used mainly for educational purposes." }, { "value": "B", "label": "B activated brain areas associated with visual and spatial memory." }, { "value": "C", "label": "C became widespread in ancient Greece for memorizing speeches and texts." }, { "value": "D", "label": "D the result of techniques and extensive practice." }, { "value": "E", "label": "E retaining a wide variety of tasks." }, { "value": "F", "label": "F benefited from additional cognitive abilities." }], "correctAnswer": "E", "explanation": "Paragraph G contrasts naturals as strong across many types of tasks, unlike strategists." },
                        { "id": 40, "type": "MATCHING", "text": "According to K. Anders Ericsson, Shereshevski‚Äôs skills were", "options": [{ "value": "A", "label": "A used mainly for educational purposes." }, { "value": "B", "label": "B activated brain areas associated with visual and spatial memory." }, { "value": "C", "label": "C became widespread in ancient Greece for memorizing speeches and texts." }, { "value": "D", "label": "D the result of techniques and extensive practice." }, { "value": "E", "label": "E retaining a wide variety of tasks." }, { "value": "F", "label": "F benefited from additional cognitive abilities." }], "correctAnswer": "D", "explanation": "Paragraph G states the remarkable abilities were based on techniques plus extensive practice." }
                    ]
                }
            ]
        };

        // Application State
        let currentPart = 1;
        let answers = {};
        let leftPanelWidth = 50;
        let isDragging = false;
        let highlights = {}; // Store highlights per part: { partId: [highlights] }
        let highlightButton = { show: false, x: 0, y: 0, selectedRange: null };
        let clearHighlightButton = { show: false, x: 0, y: 0, highlightId: null };

        // Timer State
        let timeRemaining = testData.duration * 60; // in seconds
        let isTimerRunning = false;
        let timerInterval = null;
        let hasTestStarted = false;
        let isTestSubmitted = false;

        // Timer Functions
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function updateTimerDisplay() {
            document.getElementById('timer-text').textContent = formatTime(timeRemaining);
        }

        function startTimer() {
            if (isTimerRunning) return;
            isTimerRunning = true;
            updateTimerIcons();
            if (timerInterval) clearInterval(timerInterval);

            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();

                if (timeRemaining <= 0) {
                    stopTimer();
                    alert("Time's up! Your test will be submitted automatically.");
                    submitTest();
                }
            }, 1000);
        }

        function stopTimer() {
            isTimerRunning = false;
            updateTimerIcons();
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function toggleTimer() {
            if (isTimerRunning) {
                stopTimer();
            } else {
                startTimer();
            }
        }

        function updateTimerIcons() {
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');

            if (isTimerRunning) {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            } else {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        }

        // Panel Resizing
        function handleMouseDown(e) {
            isDragging = true;
            e.preventDefault();
        }

        function handleMouseMove(e) {
            if (!isDragging) return;

            const container = document.getElementById('main-container');
            const containerRect = container.getBoundingClientRect();
            const newWidth = ((e.clientX - containerRect.left) / containerRect.width) * 100;

            // Constrain between 20% and 80%
            const constrainedWidth = Math.max(20, Math.min(80, newWidth));
            leftPanelWidth = constrainedWidth;

            document.getElementById('left-panel').style.width = `${leftPanelWidth}%`;
            document.getElementById('right-panel').style.width = `${100 - leftPanelWidth}%`;
        }

        function handleMouseUp() {
            isDragging = false;
        }

@@ -1684,61 +1645,61 @@
                        <table class="w-full text-sm mb-4 border border-gray-300">
                            <tr class="border-b border-gray-300">
                                <td class="border-r border-gray-300 p-2 font-bold">TRUE</td>
                                <td class="p-2">if the statement agrees with the information</td>
                            </tr>
                            <tr class="border-b border-gray-300">
                                <td class="border-r border-gray-300 p-2 font-bold">FALSE</td>
                                <td class="p-2">if the statement contradicts the information</td>
                            </tr>
                            <tr>
                                <td class="border-r border-gray-300 p-2 font-bold">NOT GIVEN</td>
                                <td class="p-2">if there is no information on this</td>
                            </tr>
                        </table>
                    `;
                    
                    const questionsDiv = document.createElement('div');
                    questionsDiv.className = 'space-y-4';

                    tfQuestions.forEach(question => {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'flex items-start space-x-3';
                        questionDiv.id = `question-${question.id}`;

                        questionDiv.innerHTML = `
                            <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1 flex-shrink-0">
                            <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1 flex-shrink-0">
                                ${question.id}
                            </div>
                            <div class="flex-1">
                                <p class="text-sm mb-2">${question.text}</p>
                                <div class="flex space-x-4">
                                    ${question.options.map(option => `
                                        <label class="flex items-center space-x-2 cursor-pointer">
                                            <input type="radio" name="question-${question.id}" value="${option.value}" 
                                                   ${answers[question.id] === option.value ? 'checked' : ''} 
                                                   class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                                                   class="w-4 h-4 text-blue-900 border-gray-300 focus:ring-red-500">
                                            <span class="text-sm">${option.label}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `;

                        questionDiv.querySelectorAll('input[type="radio"]').forEach(radio => {
                            radio.addEventListener('change', () => {
                                answers[question.id] = radio.value;
                                updateQuestionIndicators();
                            });
                        });

                        questionsDiv.appendChild(questionDiv);
                    });

                    tfSection.appendChild(questionsDiv);
                    container.appendChild(tfSection);
                }

                // Questions 7-13: GAP FILL (Complete the notes)
                const gapFillQuestions = part.questions.filter(q => q.type === 'GAP_FILL').sort((a, b) => a.id - b.id);
                if (gapFillQuestions.length > 0) {
                    const gapSection = document.createElement('div');
@@ -2026,100 +1987,100 @@

                // Questions 20-21: Multiple choice (choose two)
                const multiChoiceReasons = part.questions.find(q => q.type === "MULTIPLE_CHOICE_MULTI" && q.id === 20);
                if (multiChoiceReasons) {
                    const section = document.createElement('div');
                    section.className = 'mb-6';
                    section.innerHTML = `
                        <h3 class="font-bold mb-2">Questions 20‚Äì21</h3>
                        <p class="text-sm text-gray-700 mb-2">Choose <strong>TWO</strong> correct answers.</p>
                        <p class="text-sm text-gray-700 mb-4">Write the correct letters in boxes 20‚Äì21 on your answer sheet.</p>
                        <p class="text-sm text-gray-700 mb-4">${multiChoiceReasons.text}</p>
                    `;

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'space-y-2';
                    optionsDiv.id = `question-${multiChoiceReasons.id}`;

                    multiChoiceReasons.options.forEach(option => {
                        const label = document.createElement('label');
                        label.className = 'flex items-center space-x-2 cursor-pointer text-sm text-gray-700';
                        const currentAnswers = answers[multiChoiceReasons.id] || [];
                        const isChecked = Array.isArray(currentAnswers) && currentAnswers.includes(option.value);
                        const optionFirstChar = option.label.charAt(0);
                        const optionRest = option.label.substring(1);
                        label.innerHTML = `
                            <input type="checkbox" value="${option.value}" ${isChecked ? 'checked' : ''} class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                            <input type="checkbox" value="${option.value}" ${isChecked ? 'checked' : ''} class="w-4 h-4 text-blue-900 border-gray-300 focus:ring-red-500">
                            <span><strong>${optionFirstChar}</strong>${optionRest}</span>
                        `;
                        label.querySelector('input').addEventListener('change', (e) => {
                            const selected = answers[multiChoiceReasons.id] || [];
                            if (e.target.checked) {
                                if (selected.length >= 2) {
                                    e.target.checked = false;
                                    return;
                                }
                                if (!selected.includes(option.value)) selected.push(option.value);
                            } else {
                                const idx = selected.indexOf(option.value);
                                if (idx !== -1) selected.splice(idx, 1);
                            }
                            answers[multiChoiceReasons.id] = selected;
                            updateQuestionIndicators();
                        });
                        optionsDiv.appendChild(label);
                    });

                    section.appendChild(optionsDiv);
                    container.appendChild(section);
                }

                // Questions 22-23: Multiple choice (choose two)
                const multiChoiceResults = part.questions.find(q => q.type === "MULTIPLE_CHOICE_MULTI" && q.id === 22);
                if (multiChoiceResults) {
                    const section = document.createElement('div');
                    section.className = 'mb-6';
                    section.innerHTML = `
                        <h3 class="font-bold mb-2">Questions 22‚Äì23</h3>
                        <p class="text-sm text-gray-700 mb-2">Choose <strong>TWO</strong> correct answers.</p>
                        <p class="text-sm text-gray-700 mb-4">Write the correct letters in boxes 22‚Äì23 on your answer sheet.</p>
                        <p class="text-sm text-gray-700 mb-4">${multiChoiceResults.text}</p>
                    `;

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'space-y-2';
                    optionsDiv.id = `question-${multiChoiceResults.id}`;

                    multiChoiceResults.options.forEach(option => {
                        const label = document.createElement('label');
                        label.className = 'flex items-center space-x-2 cursor-pointer text-sm text-gray-700';
                        const currentAnswers = answers[multiChoiceResults.id] || [];
                        const isChecked = Array.isArray(currentAnswers) && currentAnswers.includes(option.value);
                        const optionFirstChar = option.label.charAt(0);
                        const optionRest = option.label.substring(1);
                        label.innerHTML = `
                            <input type="checkbox" value="${option.value}" ${isChecked ? 'checked' : ''} class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                            <input type="checkbox" value="${option.value}" ${isChecked ? 'checked' : ''} class="w-4 h-4 text-blue-900 border-gray-300 focus:ring-red-500">
                            <span><strong>${optionFirstChar}</strong>${optionRest}</span>
                        `;
                        label.querySelector('input').addEventListener('change', (e) => {
                            const selected = answers[multiChoiceResults.id] || [];
                            if (e.target.checked) {
                                if (selected.length >= 2) {
                                    e.target.checked = false;
                                    return;
                                }
                                if (!selected.includes(option.value)) selected.push(option.value);
                            } else {
                                const idx = selected.indexOf(option.value);
                                if (idx !== -1) selected.splice(idx, 1);
                            }
                            answers[multiChoiceResults.id] = selected;
                            updateQuestionIndicators();
                        });
                        optionsDiv.appendChild(label);
                    });

                    section.appendChild(optionsDiv);
                    container.appendChild(section);
                }

                // Questions 24-26: Summary completion
@@ -2504,72 +2465,72 @@
            }

            // YES/NO/NOT GIVEN Questions (37-40) for Part 3
            const yesNoNotGivenQuestions = part.questions.filter(q => q.type === 'YES_NO_NOT_GIVEN');
            if (yesNoNotGivenQuestions.length > 0) {
                const section = document.createElement('div');
                section.className = 'mb-6';
                section.innerHTML = `
                    <h3 class="font-bold mb-4">Questions 37-40</h3>
                    <p class="text-sm text-gray-700 mb-2">Do the following statements agree with writer's view in Reading Passage 3?</p>
                    <p class="text-sm text-gray-700 mb-4">Write</p>
                    <div class="ml-4 text-sm text-gray-700 mb-6">
                        <p><strong>YES</strong> if the statement agrees with the writer's opinion</p>
                        <p><strong>NO</strong> if the statement contradicts the writer's opinion</p>
                        <p><strong>NOT GIVEN</strong> if there is no information on this</p>
                    </div>
                `;
                
                const questionsDiv = document.createElement('div');
                questionsDiv.className = 'space-y-4';
                
                yesNoNotGivenQuestions.forEach(question => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'flex items-start space-x-3';
                    questionDiv.innerHTML = `
                        <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                            ${question.id}
                        </div>
                        <div class="flex-1">
                            <p class="text-sm mb-2">${question.text}</p>
                            <div class="flex space-x-4">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="question-${question.id}" value="YES" 
                                           ${answers[question.id] === 'YES' ? 'checked' : ''} 
                                           class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                                           class="w-4 h-4 text-blue-900 border-gray-300 focus:ring-red-500">
                                    <span class="text-sm">YES</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="question-${question.id}" value="NO" 
                                           ${answers[question.id] === 'NO' ? 'checked' : ''} 
                                           class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                                           class="w-4 h-4 text-blue-900 border-gray-300 focus:ring-red-500">
                                    <span class="text-sm">NO</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="question-${question.id}" value="NOT GIVEN" 
                                           ${answers[question.id] === 'NOT GIVEN' ? 'checked' : ''} 
                                           class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                                           class="w-4 h-4 text-blue-900 border-gray-300 focus:ring-red-500">
                                    <span class="text-sm">NOT GIVEN</span>
                                </label>
                            </div>
                        </div>
                    `;

                    // Add event listeners for radio buttons
                    questionDiv.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.addEventListener('change', () => {
                            answers[question.id] = radio.value;
                            updateQuestionIndicators();
                        });
                    });
                    
                    questionsDiv.appendChild(questionDiv);
                });
                
                section.appendChild(questionsDiv);
                container.appendChild(section);
            }

            // Summary Completion Questions (11-13)
            if (summaryQuestions.filter(q => q.id >= 11 && q.id <= 13).length > 0) {
                const section = document.createElement('div');
                section.className = 'mb-6';
@@ -2835,294 +2796,294 @@
            if (multipleChoiceQuestions.filter(q => q.id === 40).length > 0) {
                const section = document.createElement('div');
                section.className = 'mb-6';
                section.innerHTML = `
                    <h3 class="font-bold mb-4">Question 40</h3>
                    <p class="text-sm text-gray-700 mb-4">Choose the correct answer.</p>
                    <div class="space-y-6" id="question-40"></div>
                `;
                container.appendChild(section);

                const questionsDiv = section.querySelector('#question-40');
                const question40 = multipleChoiceQuestions.find(q => q.id === 40);
                if (question40) {
                    const questionDiv = createMultipleChoiceQuestion(question40);
                    questionsDiv.appendChild(questionDiv);
                }
            }
        }

        function createTrueFalseQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                    <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        ${question.id}
                    </div>
                    <div class="flex-1">
                        <p class="mb-3 text-sm">${question.text}</p>
                        <div class="flex space-x-6" id="options-${question.id}"></div>
                    </div>
                </div>
            `;

            const optionsDiv = div.querySelector(`#options-${question.id}`);
            question.options.forEach(option => {
                const label = document.createElement('label');
                label.className = 'flex items-center space-x-2 cursor-pointer';
                label.innerHTML = `
                    <input type="radio" name="q${question.id}" value="${option.value}" class="w-4 h-4 text-red-600" ${answers[question.id] === option.value ? 'checked' : ''}>
                    <input type="radio" name="q${question.id}" value="${option.value}" class="w-4 h-4 text-blue-900" ${answers[question.id] === option.value ? 'checked' : ''}>
                    <span class="text-sm">${option.label}</span>
                `;
                label.querySelector('input').addEventListener('change', (e) => {
                    if (e.target.checked) {
                        answers[question.id] = e.target.value;
                        updateQuestionIndicators();
                    }
                });
                optionsDiv.appendChild(label);
            });

            return div;
        }

        function createDropdownQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-center justify-between py-2">
                    <div class="flex items-start space-x-3 flex-1">
                        <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                            ${question.id}
                        </div>
                        <div class="flex-1">
                            <p class="text-sm">${question.text}</p>
                        </div>
                    </div>
                    <select class="border border-gray-400 rounded px-2 py-1 text-sm w-14 bg-white ml-4" id="dropdown-${question.id}">
                        <option value="">${question.id}</option>
                        ${question.options.map(option => 
                            `<option value="${option.value}">${option.value}</option>`
                        ).join('')}
                    </select>
                </div>
            `;

            const select = div.querySelector(`#dropdown-${question.id}`);
            select.addEventListener('change', function() {
                answers[question.id] = this.value;
                updateQuestionIndicators();
            });

            // Set saved answer if exists
            if (answers[question.id]) {
                select.value = answers[question.id];
            }

            return div;
        }

        function createMultipleChoiceMultiQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="flex space-x-1 flex-shrink-0">
                        <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                            25
                        </div>
                        <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                            26
                        </div>
                    </div>
                    <div class="flex-1">
                        <p class="mb-3 text-sm">${question.text}</p>
                        <div class="space-y-2" id="options-${question.id}"></div>
                    </div>
                </div>
            `;

            const optionsDiv = div.querySelector(`#options-${question.id}`);
            question.options.forEach(option => {
                const label = document.createElement('label');
                label.className = 'flex items-center space-x-2 cursor-pointer';
                const currentAnswers = answers[question.id] || [];
                const isChecked = Array.isArray(currentAnswers) && currentAnswers.includes(option.value);
                label.innerHTML = `
                    <input type="checkbox" value="${option.value}" class="w-4 h-4 text-red-600" ${isChecked ? 'checked' : ''}>
                    <input type="checkbox" value="${option.value}" class="w-4 h-4 text-blue-900" ${isChecked ? 'checked' : ''}>
                    <span class="text-sm">${option.label}</span>
                `;
                optionsDiv.appendChild(label);

                label.querySelector('input').addEventListener('change', (e) => {
                    // For questions 25-26, sync both question answers
                    const questionsToSync = question.id === 25 || question.id === 26 ? [25, 26] : [question.id];

                    questionsToSync.forEach(qId => {
                        if (!answers[qId]) {
                            answers[qId] = [];
                        }
                        if (!Array.isArray(answers[qId])) {
                            answers[qId] = [];
                        }

                        if (e.target.checked) {
                            // Limit to exactly 2 selections for multi-choice questions
                            if (answers[qId].length >= 2) {
                                // If already have 2 selections, remove the first one
                                answers[qId].shift();
                            }
                            if (!answers[qId].includes(option.value)) {
                                answers[qId].push(option.value);
                            }
                        } else {
                            answers[qId] = answers[qId].filter(val => val !== option.value);
                        }

                        // Update checkbox states to reflect current selection
                        const allCheckboxes = div.querySelectorAll('input[type="checkbox"]');
                        allCheckboxes.forEach(cb => {
                            cb.checked = answers[qId] && answers[qId].includes(cb.value);
                        });
                    });

                    updateQuestionIndicators();
                });
            });

            return div;
        }

        function createMultipleChoiceQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                    <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        ${question.id}
                    </div>
                    <div class="flex-1">
                        <p class="mb-3 text-sm">${question.text}</p>
                        <div class="space-y-2" id="options-${question.id}"></div>
                    </div>
                </div>
            `;

            const optionsDiv = div.querySelector(`#options-${question.id}`);
            question.options.forEach(option => {
                const label = document.createElement('label');
                label.className = 'flex items-center space-x-2 cursor-pointer';
                const firstChar = option.label.charAt(0);
                const restOfLabel = option.label.substring(1);
                label.innerHTML = `
                    <input type="radio" name="q${question.id}" value="${option.value}" class="w-4 h-4 text-red-600" ${answers[question.id] === option.value ? 'checked' : ''}>
                    <input type="radio" name="q${question.id}" value="${option.value}" class="w-4 h-4 text-blue-900" ${answers[question.id] === option.value ? 'checked' : ''}>
                    <span class="text-sm"><strong>${firstChar}</strong>${restOfLabel}</span>
                `;
                label.querySelector('input').addEventListener('change', (e) => {
                    if (e.target.checked) {
                        answers[question.id] = e.target.value;
                        updateQuestionIndicators();
                    }
                });
                optionsDiv.appendChild(label);
            });

            return div;
        }

        function createSummaryQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                    <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        ${question.id}
                    </div>
                    <div class="flex-1 flex items-center space-x-3">
                        <p class="text-sm flex-1">${question.text}</p>
                        <input type="text" value="${answers[question.id] || ''}" class="w-72 h-10 border-2 border-gray-400 text-sm bg-white outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded px-3" placeholder="${question.id}">
                    </div>
                </div>
            `;

            div.querySelector('input').addEventListener('input', (e) => {
                answers[question.id] = e.target.value;
                updateQuestionIndicators();
            });

            return div;
        }

        function createPlaceMatchingQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                    <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        ${question.id}
                    </div>
                    <div class="flex-1 flex items-center space-x-3">
                        <p class="text-sm flex-1">${question.text}</p>
                        <select class="w-16 h-8 border-2 border-gray-400 text-sm bg-white outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded px-1">
                            <option value="">${question.id}</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                        </select>
                    </div>
                </div>
            `;

            // Set saved answer if exists
            if (answers[question.id]) {
                div.querySelector('select').value = answers[question.id];
            }

            div.querySelector('select').addEventListener('change', (e) => {
                answers[question.id] = e.target.value;
                updateQuestionIndicators();
            });

            return div;
        }

        function createParagraphMatchingQuestion(question) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.id = `question-${question.id}`;
            div.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                    <div class="w-6 h-6 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold mt-1">
                        ${question.id}
                    </div>
                    <div class="flex-1 flex items-center space-x-3">
                        <p class="text-sm flex-1">${question.text}</p>
                        <select value="${answers[question.id] || ''}" class="w-20 h-8 border-2 border-gray-400 text-sm bg-white outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded px-1">
                            <option value="">${question.id}</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                            <option value="I">I</option>
                        </select>
                    </div>
                </div>
            `;

            div.querySelector('select').addEventListener('change', (e) => {
                answers[question.id] = e.target.value;
                updateQuestionIndicators();
            });

@@ -3157,51 +3118,51 @@
                    zone.classList.remove('border-blue-500', 'bg-blue-50');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('border-blue-500', 'bg-blue-50');
                    
                    const headingValue = e.dataTransfer.getData('text/plain');
                    const headingHTML = e.dataTransfer.getData('text/html');
                    const questionId = zone.dataset.question;
                    
                    if (headingValue && questionId) {
                        // Clear previous content and add the dropped heading
                        zone.innerHTML = '';
                        zone.classList.remove('border-dashed', 'border-gray-400', 'bg-gray-50', 'text-gray-600');
                        zone.classList.add('border-solid', 'border-green-500', 'bg-green-50');
                        
                        // Create a styled display of the dropped heading
                        const headingDisplay = document.createElement('div');
                        headingDisplay.className = 'flex items-center justify-between w-full';
                        headingDisplay.innerHTML = `
                            <div class="flex items-center">
                                <span class="font-bold mr-2">${questionId}</span>
                                <span class="text-green-700">${headingHTML}</span>
                            </div>
                            <button class="text-red-600 hover:text-red-800 text-sm font-bold ml-2" onclick="clearHeadingAnswer('${questionId}')">‚úï</button>
                            <button class="text-blue-900 hover:text-blue-950 text-sm font-bold ml-2" onclick="clearHeadingAnswer('${questionId}')">‚úï</button>
                        `;
                        zone.appendChild(headingDisplay);
                        
                        // Save the answer
                        answers[questionId] = headingValue;
                        updateQuestionIndicators();
                        
                        // Hide the used heading option
                        const usedOption = document.querySelector(`[data-value="${headingValue}"]`);
                        if (usedOption) {
                            usedOption.style.display = 'none';
                        }
                    }
                });
            });
        }

        function initializeSummaryDragDrop() {
            const draggableOptions = document.querySelectorAll('.draggable-option');
            const dropZones = document.querySelectorAll('.inline-drop-zone');
            
            // Add drag event listeners to draggable options
            draggableOptions.forEach(option => {
                option.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', option.dataset.value);
@@ -3355,58 +3316,58 @@
                    <div class="bg-white border-2 border-gray-300 rounded px-2 py-1 text-center cursor-move hover:bg-blue-50 hover:border-blue-400 transition-colors select-none" data-value="E">
                        <div class="font-bold text-sm">E</div>
                        <div class="text-xs">1825</div>
                    </div>
                    <div class="bg-white border-2 border-gray-300 rounded px-2 py-1 text-center cursor-move hover:bg-blue-50 hover:border-blue-400 transition-colors select-none" data-value="F">
                        <div class="font-bold text-sm">F</div>
                        <div class="text-xs">1837</div>
                    </div>
                    <div class="bg-white border-2 border-gray-300 rounded px-2 py-1 text-center cursor-move hover:bg-blue-50 hover:border-blue-400 transition-colors select-none" data-value="G">
                        <div class="font-bold text-sm">G</div>
                        <div class="text-xs">1843</div>
                    </div>
                </div>
            `;
            container.appendChild(optionsBox);

            // Questions
            const questionsDiv = document.createElement('div');
            questionsDiv.className = 'space-y-4';

            questions.forEach(question => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'flex items-center space-x-4';
                questionDiv.id = `question-${question.id}`;
                questionDiv.innerHTML = `
                    <div class="w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                    <div class="w-8 h-8 bg-blue-900 text-white rounded-full flex items-center justify-center text-sm font-bold">
                        ${question.id}
                    </div>
                    <div class="flex-1 text-sm">
                        ${question.text}
                    </div>
                    <div class="drop-zone h-8 border-2 border-gray-400 rounded flex items-center justify-center text-sm bg-white transition-colors border-dashed hover:border-blue-400 hover:bg-blue-50 min-w-16" data-question="${question.id}">
                        ${answers[question.id] ? `<span class="font-bold text-sm">${answers[question.id]} <button class="text-red-500 hover:text-red-700 text-xs ml-1">√ó</button></span>` : ''}
                        ${answers[question.id] ? `<span class="font-bold text-sm">${answers[question.id]} <button class="text-teal-700 hover:text-teal-800 text-xs ml-1">√ó</button></span>` : ''}
                    </div>
                `;
                questionsDiv.appendChild(questionDiv);

                // Add drag and drop functionality
                const dropZone = questionDiv.querySelector('.drop-zone');

                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'copy';
                });

                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const droppedValue = e.dataTransfer.getData('text/plain');
                    answers[question.id] = droppedValue;
                    updateMatchingDisplay(question.id, droppedValue);
                    updateQuestionIndicators();
                });

                // Add click functionality for clear button
                dropZone.addEventListener('click', (e) => {
                    if (e.target.textContent === '√ó') {
                        answers[question.id] = '';
                        updateMatchingDisplay(question.id, '');
@@ -3437,51 +3398,51 @@
                // For summary drag-drop questions, extract just the descriptive text without the letter
                if (matchingOption) {
                    const boldSpan = matchingOption.querySelector('span.font-bold');
                    if (boldSpan) {
                        // Clone and remove the bold span to get clean text
                        const clone = matchingOption.cloneNode(true);
                        const cloneBoldSpan = clone.querySelector('span.font-bold');
                        if (cloneBoldSpan) {
                            cloneBoldSpan.remove();
                            displayText = clone.textContent.trim();
                        }
                    } else {
                        displayText = matchingOption.textContent.trim();
                    }
                }
                
                // Clear previous content and style like heading matching
                dropZone.innerHTML = '';
                dropZone.classList.remove('border-dashed', 'border-gray-400', 'bg-gray-50', 'text-gray-600');
                dropZone.classList.add('border-solid', 'border-green-500', 'bg-green-50', 'inline-flex', 'items-center');
                
                // Create inline content to avoid layout issues - show just the descriptive text
                dropZone.innerHTML = `
                    <span class="font-bold mr-2">${questionId}</span>
                    <span class="text-green-700">${displayText}</span>
                    <button class="text-red-600 hover:text-red-800 text-sm font-bold ml-2" onclick="clearSummaryAnswer('${questionId}')">‚úï</button>
                    <button class="text-blue-900 hover:text-blue-950 text-sm font-bold ml-2" onclick="clearSummaryAnswer('${questionId}')">‚úï</button>
                `;
            } else {
                // Reset to empty state - just show the number
                dropZone.innerHTML = questionId;
                dropZone.classList.remove('border-solid', 'border-green-500', 'bg-green-50', 'inline-flex', 'items-center');
                dropZone.classList.add('border-dashed', 'border-gray-400', 'bg-gray-50', 'text-gray-600');
            }
        }

        // Navigation
        function updateNavigation() {
            // Update navigation buttons
            document.getElementById('prev-part-btn').disabled = currentPart === 1;
            document.getElementById('next-part-btn').disabled = currentPart === testData.parts.length;

            // Update part indicators
            updatePartIndicators();
        }

        function updatePartIndicators() {
            const container = document.getElementById('parts-container');
            container.innerHTML = '';

            testData.parts.forEach((part, index) => {
                const isActive = currentPart === part.id;
@@ -3489,95 +3450,96 @@
                const partDiv = document.createElement('div');
                partDiv.className = 'flex items-center min-w-0 relative';

                const partButton = document.createElement('button');
                partButton.className = `text-base font-medium whitespace-nowrap flex-shrink-0 ${isActive ? 'text-black font-medium' : 'text-gray-400'}`;
                partButton.textContent = `Part ${part.id}`;
                partButton.addEventListener('click', () => {
                    currentPart = part.id;
                    loadPart(currentPart);
                });

                partDiv.appendChild(partButton);

                // Add question indicators if this is the active part
                if (isActive) {
                    const questionsDiv = document.createElement('div');
                    questionsDiv.className = 'flex items-center flex-wrap gap-1 justify-center ml-2';

                    part.questions.forEach((question, qIndex) => {
                        const questionBtn = document.createElement('button');
                        const answer = answers[question.id];
                        const isAnswered = answer && (Array.isArray(answer) ? answer.length > 0 : answer.trim() !== '');

                        questionBtn.className = `w-6 h-6 text-sm font-medium border rounded flex items-center justify-center transition-all duration-200 hover:scale-110 cursor-pointer ${
                            isAnswered
                                ? 'bg-red-600 text-white border-red-600 hover:bg-red-700'
                                ? 'bg-blue-900 text-white border-red-600 hover:bg-blue-800'
                                : 'bg-white text-gray-600 border-gray-300 hover:border-gray-400 hover:bg-gray-50'
                        }`;
                        questionBtn.textContent = question.id;
                        questionBtn.style.animationDelay = `${qIndex * 20}ms`;
                        questionBtn.style.animation = `fadeInScale 0.3s ease-out ${qIndex * 20}ms both`;

                        questionBtn.addEventListener('click', () => {
                            const element = document.getElementById(`question-${question.id}`);
                            if (element) {
                                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }
                        });

                        questionsDiv.appendChild(questionBtn);
                    });

                    partDiv.appendChild(questionsDiv);
                }

                container.appendChild(partDiv);
            });
        }

        function updateQuestionIndicators() {
            updatePartIndicators();
        }

        function goToPreviousPart() {
            if (currentPart > 1) {
                currentPart--;
                loadPart(currentPart);
            }
        }

        function goToNextPart() {
            if (currentPart < testData.parts.length) {
                currentPart++;
                loadPart(currentPart);
            }
        }

        // Test Submission
        function submitTest() {
            stopTimer();
            isTestSubmitted = true;

            // Synchronize Q26 with Q25 (MULTIPLE_CHOICE_TWO questions share the same answer)
            if (answers[25]) {
                answers[26] = answers[25];
            }

            // Calculate results
            let correctAnswers = 0;
            let totalQuestions = 0;
            const results = [];

            testData.parts.forEach(part => {
                part.questions.forEach(question => {
                    // Handle SUMMARY_DRAG_DROP specially - validate each box as a separate question
                    if (question.type === "SUMMARY_DRAG_DROP" && question.boxes && question.boxes.length > 0) {
                        question.boxes.forEach(box => {
                            totalQuestions++;
                            const userAnswer = answers[box.id] || '';
                            const isCorrect = userAnswer.toString().toUpperCase().trim() === box.correctAnswer.toString().toUpperCase().trim();
                            
                            if (isCorrect) {
                                correctAnswers++;
                            }

                            results.push({
@@ -4049,101 +4011,131 @@
                    band: 'Band 1 ‚Äî Non-User',
                    typical: '0‚Äì3 / 40',
                    description: 'Understand only a few isolated words. Cannot follow sentences or instructions. No basic vocabulary. Cannot recognize sentence structure. Answers are random or missing.',
                    canDo: [
                        'Understand a few isolated words',
                        'Recognize letters and numbers',
                        'Identify very familiar names'
                    ],
                    problems: [
                        'No basic vocabulary',
                        'Cannot recognize sentence structure',
                        'Answers are random or missing',
                        'No understanding of sentence meaning'
                    ],
                    mainFocus: 'Build foundational English literacy skills',
                    nextSteps: [
                        'Learn the alphabet and basic sentence patterns',
                        'Build core vocabulary (everyday words)',
                        'Read very short, simple texts daily'
                    ]
                }
            };
            return feedbacks[bandScore] || feedbacks[1.0];
        }

        async function sendResultsToTelegram(correctAnswers, totalQuestions, bandScore, timeSpent) {
            const candidateId = document.querySelector('[data-testid="test-taker-id"]')?.textContent?.trim() || 'Candidate ID';

            const payload = {
                source: 'reading-mock-pro',
                candidateId,
                score: correctAnswers,
                totalQuestions,
                bandScore,
                timeSpent: `${Math.floor(timeSpent / 60)}:${(timeSpent % 60).toString().padStart(2, '0')}`,
                submittedAt: new Date().toISOString(),
                answers
            };

            try {
                const response = await fetch('/api/telegram-results', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`Telegram endpoint failed with status ${response.status}`);
                }
            } catch (error) {
                console.error('Telegram delivery failed:', error);
            }
        }

        function showResults(score, correctAnswers, totalQuestions, timeSpent, results) {
            const bandScore = calculateBandScore(correctAnswers);
            const feedback = getBandFeedback(bandScore);
            void sendResultsToTelegram(correctAnswers, totalQuestions, bandScore, timeSpent);

            const modal = document.getElementById('results-modal');
            const content = document.getElementById('results-content');

            content.innerHTML = `
                <div class="text-center mb-6 pb-6 border-b-2">
                    <div class="text-3xl font-bold text-gray-800 mb-2">${feedback.band}</div>
                    <div class="text-sm text-gray-600 italic mb-4">${feedback.description}</div>
                    <div class="text-lg text-gray-600 mb-4">${correctAnswers} out of ${totalQuestions} correct</div>
                    <div class="text-sm text-gray-500 mb-4">Typical score: ~${feedback.typical}</div>
                    <div class="text-sm text-gray-500">Time spent: ${Math.floor(timeSpent / 60)}:${(timeSpent % 60).toString().padStart(2, '0')}</div>
                </div>

                <div class="space-y-6 mb-6">
                    <div>
                        <h4 class="font-bold text-green-700 mb-3">‚úì What you can do at this level</h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            ${feedback.canDo.map(item => `<li class="flex items-start"><span class="mr-2">‚Ä¢</span><span>${item}</span></li>`).join('')}
                        </ul>
                    </div>

                    <div>
                        <h4 class="font-bold text-red-600 mb-3">‚úó Main problems</h4>
                        <h4 class="font-bold text-blue-900 mb-3">‚úó Main problems</h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            ${feedback.problems.map(item => `<li class="flex items-start"><span class="mr-2">‚ùå</span><span>${item}</span></li>`).join('')}
                        </ul>
                    </div>

                    <div class="bg-blue-50 p-3 rounded border-l-4 border-blue-500">
                        <h4 class="font-bold text-blue-700 mb-2">üìç Your focus area</h4>
                        <p class="text-sm text-gray-700 mb-3 font-semibold">${feedback.mainFocus}</p>
                        <h4 class="font-bold text-blue-700 mb-2">‚Üí Next steps to improve</h4>
                        <ul class="text-sm text-gray-700 space-y-2">
                            ${feedback.nextSteps.map(step => `<li class="flex items-start"><span class="mr-2">‚Üí</span><span>${step}</span></li>`).join('')}
                        </ul>
                    </div>
                </div>

                <details class="mb-6 border rounded p-3 bg-gray-50">
                    <summary class="font-bold cursor-pointer text-gray-700">Answer Details</summary>
                    <div class="space-y-2 mt-4">
                        ${results.map(result => `
                            <div class="py-3 px-3 rounded ${result.isCorrect ? 'bg-green-50' : 'bg-red-50'} mb-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium">Q${result.questionId}</span>
                                    <div class="text-sm">
                                        <span class="text-gray-600">Your answer: </span>
                                        <span class="${result.isCorrect ? 'text-green-600 font-medium' : 'text-red-600 font-medium'}">${formatUserAnswer(result.userAnswer, result.questionType)}</span>
                                        <span class="${result.isCorrect ? 'text-green-600 font-medium' : 'text-blue-900 font-medium'}">${formatUserAnswer(result.userAnswer, result.questionType)}</span>
                                        ${!result.isCorrect ? `<span class="text-gray-600"> | Correct: </span><span class="text-green-600 font-medium">${result.correctAnswer}</span>` : ''}
                                    </div>
                                </div>
                                ${result.explanation ? `<div class="text-sm text-gray-700 bg-white/50 rounded px-2 py-1 mt-2"><strong>Explanation:</strong> ${result.explanation}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                </details>
            `;

            modal.classList.remove('hidden');
            // Prevent background scrolling
            document.body.style.overflow = 'hidden';
        }

        // Cursor Lightning Effect for Logo (copied from Listening Mock 1)
        (function() {
            const logoContainer = document.querySelector('.logo-container');
            const electricLogo = document.querySelector('.electric-logo');
            const plasmaRing = document.querySelector('.plasma-ring');
            const lightningContainer = document.getElementById('cursor-lightning-container');

            if (!logoContainer || !electricLogo || !lightningContainer) return;

            const PROXIMITY_THRESHOLD = 150; // pixels from logo center to trigger
@@ -4318,77 +4310,83 @@
                    premiumVideoContainer.style.display = 'none';
                    clearTimeout(shrinkTimeout);
                });

                premiumModalBg.addEventListener('click', function(e) {
                    if (e.target === premiumModalBg) {
                        premiumModalBg.style.display = 'none';
                        premiumVideo.pause();
                        premiumVideoContainer.style.display = 'none';
                        clearTimeout(shrinkTimeout);
                    }
                });
            }
        })();

        // Welcome Modal - Always show and play sound
        (function() {
            const welcomeModalBg = document.getElementById('welcome-modal-bg');
            const welcomeStartBtn = document.getElementById('welcome-start-btn');

            if (welcomeModalBg && welcomeStartBtn) {
                welcomeModalBg.style.display = 'flex';

                welcomeStartBtn.addEventListener('click', function() {
                    playStartSound();
                    hasTestStarted = true;
                    startTimer();
                    welcomeModalBg.classList.add('glitch-fade-out');

                    setTimeout(function() {
                        welcomeModalBg.style.display = 'none';
                    }, 800);
                });
            }

            function playStartSound() {
                try {
                    const audio = new Audio('https://pub-a3ed3eec4ae344b4917067de0a9376f1.r2.dev/SOUND%20EEFECT%20mixkit-sci-fi-positive-notification-266.wav');
                    audio.volume = 0.7;
                    audio.play();
                } catch (e) {
                    console.log('Audio error:', e);
                }
            }
        })();

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize
            loadPart(currentPart);
            updateTimerDisplay();

            // Timer controls
            document.getElementById('timer-toggle').addEventListener('click', toggleTimer);
            window.addEventListener('beforeunload', function (event) {
                if (hasTestStarted && !isTestSubmitted) {
                    event.preventDefault();
                    event.returnValue = '';
                }
            });

            // Panel resizing
            document.getElementById('resize-handle').addEventListener('mousedown', handleMouseDown);
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);

            // Navigation
            document.getElementById('prev-part-btn').addEventListener('click', goToPreviousPart);
            document.getElementById('next-part-btn').addEventListener('click', goToNextPart);
            document.getElementById('submit-test-btn').addEventListener('click', function() {
                // Show custom confirmation modal
                showSubmitConfirmation();
            });

            // Highlighting
            document.getElementById('highlight-button').addEventListener('click', addHighlight);
            document.getElementById('clear-highlight-button').addEventListener('click', () => {
                if (clearHighlightButton.highlightId) {
                    removeHighlight(clearHighlightButton.highlightId);
                    hideClearHighlightButton();
                }
            });

            // Text selection for highlighting
            document.addEventListener('mouseup', (e) => {
